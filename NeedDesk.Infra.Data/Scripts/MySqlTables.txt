/*
DROP DATABASE IF EXISTS need;
CREATE DATABASE need;
USE need;

-- TABELAS CADATROS
CREATE TABLE tenants (
  tenant_id 				BIGINT NOT NULL AUTO_INCREMENT,
  identifier				CHAR(36),
  createAt					DATETIME,
  updateAt					DATETIME,
  
  PRIMARY KEY (tenant_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE users (
  tenant_id				BIGINT,
  use_id 				BIGINT NOT NULL AUTO_INCREMENT,
  use_email 			VARCHAR(50) NOT NULL DEFAULT '0',
  use_senha				VARCHAR(50) NOT NULL DEFAULT '',
  use_inativo			BIT NOT NULL DEFAULT 0,
  identifier			CHAR(36),
  createAt				DATETIME,
  updateAt				DATETIME,
  
  PRIMARY KEY (use_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE categorias (
  tenant_id					BIGINT,
  cat_id	 				BIGINT NOT NULL AUTO_INCREMENT,
  cat_descricao				VARCHAR(50) NOT NULL DEFAULT '',
  cat_inativo				BIT NOT NULL DEFAULT 0,
  identifier				CHAR(36),
  createAt					DATETIME,
  updateAt					DATETIME,
  
  PRIMARY KEY (cat_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE classificacao (
  tenant_id					BIGINT,
  cla_id	 				BIGINT NOT NULL AUTO_INCREMENT,
  cla_descricao				VARCHAR(50) NOT NULL DEFAULT '',
  cla_inativo				BIT NOT NULL DEFAULT 0,
  identifier				CHAR(36),
  createAt					DATETIME,
  updateAt					DATETIME,
  
  PRIMARY KEY (cla_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE prioridades (
  tenant_id					BIGINT,
  pri_id	 				BIGINT NOT NULL AUTO_INCREMENT,
  pri_descricao				VARCHAR(50) NOT NULL DEFAULT '',
  pri_inativo				BIT NOT NULL DEFAULT 0,
  identifier				CHAR(36),
  createAt					DATETIME,
  updateAt					DATETIME,
  
  PRIMARY KEY (pri_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE status (
  tenant_id					BIGINT,
  sta_id	 				BIGINT NOT NULL AUTO_INCREMENT,
  sta_descricao				VARCHAR(50) NOT NULL DEFAULT '',
  sta_inativo				BIT NOT NULL DEFAULT 0,
  identifier				CHAR(36),
  createAt					DATETIME,
  updateAt					DATETIME,
  
  PRIMARY KEY (sta_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE departamentos (
  tenant_id					BIGINT,
  dep_id	 				BIGINT NOT NULL AUTO_INCREMENT,
  dep_descricao				VARCHAR(50) NOT NULL DEFAULT '',
  dep_inativo				BIT NOT NULL DEFAULT 0,
  identifier				CHAR(36),
  createAt					DATETIME,
  updateAt					DATETIME,
  
  PRIMARY KEY (dep_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE clientes (
  tenant_id					BIGINT,
  cli_id	 				BIGINT NOT NULL AUTO_INCREMENT,  
  cli_nome					VARCHAR(50) NOT NULL DEFAULT '',
  cli_inativo				BIT NOT NULL DEFAULT 0,
  identifier				CHAR(36),
  createAt					DATETIME,
  updateAt					DATETIME,
  
  PRIMARY KEY (cli_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE colaboradores (
  tenant_id				BIGINT,
  col_id 				BIGINT NOT NULL AUTO_INCREMENT,
  use_id				BIGINT,
  col_nome				VARCHAR(50) NOT NULL DEFAULT '',
  Col_sobrenome			VARCHAR(50) NOT NULL DEFAULT '',
  col_inativo			BIT NOT NULL DEFAULT 0,
  identifier			CHAR(36),
  createAt				DATETIME,
  updateAt				DATETIME,
  
  PRIMARY KEY (col_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE departamentos_categorias (
  tenant_id				BIGINT,
  dec_id 				BIGINT NOT NULL AUTO_INCREMENT,
  dep_id				BIGINT,
  cat_id				BIGINT,  
  
  identifier			CHAR(36),
  createAt				DATETIME,
  updateAt				DATETIME,
  
  PRIMARY KEY (dec_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE categorias_classificacao (
  tenant_id				BIGINT,
  cal_id 				BIGINT NOT NULL AUTO_INCREMENT,
  cat_id				BIGINT,
  cla_id				BIGINT,
  
  identifier			CHAR(36),
  createAt				DATETIME,
  updateAt				DATETIME,
  
  PRIMARY KEY (cal_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE departamentos_status (
  tenant_id				BIGINT,
  des_id 				BIGINT NOT NULL AUTO_INCREMENT,
  dep_id				BIGINT,
  sta_id				BIGINT,
  
  identifier			CHAR(36),
  createAt				DATETIME,
  updateAt				DATETIME,
  
  PRIMARY KEY (des_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE departamentos_colaboradores (
  tenant_id				BIGINT,
  dec_id 				BIGINT NOT NULL AUTO_INCREMENT,
  dep_id				BIGINT,
  col_id				BIGINT,
  
  identifier			CHAR(36),
  createAt				DATETIME,
  updateAt				DATETIME,
  
  PRIMARY KEY (dec_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE tickets (
  tenant_id				BIGINT,
  tic_id 				BIGINT NOT NULL AUTO_INCREMENT,
  dep_id				BIGINT,
  cli_id				BIGINT,
  col_id_soli			BIGINT,
  col_id_pend			BIGINT,
  pri_id				BIGINT,
  cat_id				BIGINT,
  cla_id				BIGINT,
  sta_id				BIGINT,
  tick_assunto			VARCHAR(250) NOT NULL DEFAULT '',
  tick_tipo				INT NOT NULL DEFAULT 0,
  
  identifier			CHAR(36),
  createAt				DATETIME,
  updateAt				DATETIME,
  
  PRIMARY KEY (tic_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE ticket_andamentos (
  tenant_id				BIGINT,
  and_id 				BIGINT NOT NULL AUTO_INCREMENT,
  tic_id				BIGINT,
  and_texto				TEXT,

  identifier			CHAR(36),
  createAt				DATETIME,
  updateAt				DATETIME,
  
  PRIMARY KEY (and_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- CREATE FK
ALTER TABLE users ADD CONSTRAINT fk_users_tanants FOREIGN KEY (tenant_id) REFERENCES tenants(tenant_id);
ALTER TABLE categorias ADD CONSTRAINT fk_categorias_tanants FOREIGN KEY (tenant_id) REFERENCES tenants(tenant_id);
ALTER TABLE classificacao ADD CONSTRAINT fk_classificacao_tanants FOREIGN KEY (tenant_id) REFERENCES tenants(tenant_id);
ALTER TABLE clientes ADD CONSTRAINT fk_clientes_tanants FOREIGN KEY (tenant_id) REFERENCES tenants(tenant_id);
ALTER TABLE departamentos ADD CONSTRAINT fk_departamentos_tanants FOREIGN KEY (tenant_id) REFERENCES tenants(tenant_id);
ALTER TABLE prioridades ADD CONSTRAINT fk_prioridades_tanants FOREIGN KEY (tenant_id) REFERENCES tenants(tenant_id);
ALTER TABLE status ADD CONSTRAINT fk_status_tanants FOREIGN KEY (tenant_id) REFERENCES tenants(tenant_id);

-- colaboradores
ALTER TABLE colaboradores ADD CONSTRAINT fk_colaboradores_tanants FOREIGN KEY (tenant_id) REFERENCES tenants(tenant_id);
ALTER TABLE colaboradores ADD CONSTRAINT fk_colaboradores_users FOREIGN KEY (Use_id) REFERENCES users(Use_id);

-- ticket_andamentos
ALTER TABLE ticket_andamentos ADD CONSTRAINT fk_ticket_andamentos_tanants FOREIGN KEY (tenant_id) REFERENCES tenants(tenant_id);
ALTER TABLE ticket_andamentos ADD CONSTRAINT fk_ticket_andamentos_tickets FOREIGN KEY (tic_id) REFERENCES tickets(tic_id);

-- departamentos_categorias
ALTER TABLE departamentos_categorias ADD CONSTRAINT fk_departamentos_categorias_tanants FOREIGN KEY (tenant_id) REFERENCES tenants(tenant_id);
ALTER TABLE departamentos_categorias ADD CONSTRAINT fk_departamentos_categorias_departamentos FOREIGN KEY (dep_id) REFERENCES departamentos(dep_id);
ALTER TABLE departamentos_categorias ADD CONSTRAINT fk_departamentos_categorias_categorias FOREIGN KEY (cat_id) REFERENCES categorias(cat_id);

-- categorias_classificacao
ALTER TABLE categorias_classificacao ADD CONSTRAINT fk_categorias_classificacao_tanants FOREIGN KEY (tenant_id) REFERENCES tenants(tenant_id);
ALTER TABLE categorias_classificacao ADD CONSTRAINT fk_categorias_classificacao_categorias FOREIGN KEY (cat_id) REFERENCES categorias(cat_id);
ALTER TABLE categorias_classificacao ADD CONSTRAINT fk_categorias_classificacao_classificacao FOREIGN KEY (cla_id) REFERENCES classificacao(cla_id);

-- departamentos_status
ALTER TABLE departamentos_status ADD CONSTRAINT fk_departamentos_status_tanants FOREIGN KEY (tenant_id) REFERENCES tenants(tenant_id);
ALTER TABLE departamentos_status ADD CONSTRAINT fk_departamentos_status_departamentos FOREIGN KEY (dep_id) REFERENCES departamentos(dep_id);
ALTER TABLE departamentos_status ADD CONSTRAINT fk_departamentos_status_status FOREIGN KEY (sta_id) REFERENCES status(sta_id);

-- tickts
ALTER TABLE tickets ADD CONSTRAINT fk_tickets_tanants FOREIGN KEY (tenant_id) REFERENCES tenants(tenant_id);
ALTER TABLE tickets ADD CONSTRAINT fk_tickets_clientes FOREIGN KEY (cli_id) REFERENCES clientes(cli_id);
ALTER TABLE tickets ADD CONSTRAINT fk_tickets_colaboradores_soli FOREIGN KEY (col_id_soli) REFERENCES colaboradores(col_id);
ALTER TABLE tickets ADD CONSTRAINT fk_tickets_colaboradores_pend FOREIGN KEY (col_id_pend) REFERENCES colaboradores(col_id);
ALTER TABLE tickets ADD CONSTRAINT fk_prioridades FOREIGN KEY (pri_id) REFERENCES prioridades(pri_id);
ALTER TABLE tickets ADD CONSTRAINT fk_categorias FOREIGN KEY (cat_id) REFERENCES categorias(cat_id);
ALTER TABLE tickets ADD CONSTRAINT fk_classificacao FOREIGN KEY (cla_id) REFERENCES classificacao(cla_id);
ALTER TABLE tickets ADD CONSTRAINT fk_status FOREIGN KEY (sta_id) REFERENCES status(sta_id);

-- departamentos_colaboradores
ALTER TABLE departamentos_colaboradores ADD CONSTRAINT fk_departamentos_colaboradores_tanants FOREIGN KEY (tenant_id) REFERENCES tenants(tenant_id);
ALTER TABLE departamentos_colaboradores ADD CONSTRAINT fk_departamentos_colaboradores_departamentos FOREIGN KEY (dep_id) REFERENCES departamentos(dep_id);
ALTER TABLE departamentos_colaboradores ADD CONSTRAINT fk_departamentos_colaboradores_colaboradores FOREIGN KEY (col_id) REFERENCES colaboradores(col_id);
*/